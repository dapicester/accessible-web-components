/**
 * Max Poshusta | v1.0.0 | https://github.com/maxshuty/accessible-web-components | https://www.linkedin.com/in/maxposhusta
 */

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cssHelpers=Object.freeze({sliderBackgroundColor:"tomato",sliderCircleSize:20,sliderCircleBackgroundColor:"#ffffff",sliderCircleBorderColor:"#8b8b8b",sliderCircleFocusColor:"#0074cc"}),constants=Object.freeze({MIN:"min",MAX:"max",SLIDER_ID:"minMaxSlider",MIN_LABEL_ID:"minLabel",MAX_LABEL_ID:"maxLabel",RANGE_STOPPED_EVENTS:["mouseup","touchend","keyup"],CUSTOM_EVENT_TO_EMIT_NAME:"range-changed"}),template=document.createElement("template");template.innerHTML="\n      <style>\n        .min-max-slider { \n          position: relative;\n          width: 100%;\n          text-align: center;\n        }\n           \n        .min-max-slider > label {\n          position: absolute;\n          left: -10000px;\n          top: auto;\n          width: 1px;\n          height: 1px;\n          overflow: hidden;\n        }\n          \n        .min-max-slider > .legend {\n          display: flex;\n          justify-content: space-between;\n        }\n          \n        .min-max-slider > .legend > * {\n          font-size: small;\n        }\n          \n        .min-max-slider > input {\n          --sliderColor: ".concat(cssHelpers.sliderCircleBackgroundColor,";\n          --sliderBorderColor: ").concat(cssHelpers.sliderCircleBorderColor,";\n          --sliderFocusBorderColor: ").concat(cssHelpers.sliderCircleFocusColor,";\n          cursor: pointer;\n          position: absolute;\n          -webkit-appearance: none;\n          outline: none !important;\n          background: transparent;\n          background-image: linear-gradient(to bottom, transparent 0%, transparent 30%, ").concat(cssHelpers.sliderBackgroundColor," 30%, ").concat(cssHelpers.sliderBackgroundColor," 60%, transparent 60%, transparent 100%);\n        }\n          \n        .min-max-slider > input::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          width: ").concat(cssHelpers.sliderCircleSize,"px;\n          height: ").concat(cssHelpers.sliderCircleSize,"px;\n          background-color: var(--sliderColor);\n          cursor: pointer;\n          border: 1px solid var(--sliderBorderColor);\n          border-radius: 100%;\n        }\n        \n        .min-max-slider > input::-moz-range-thumb {\n          width: ").concat(cssHelpers.sliderCircleSize,"px;\n          height: ").concat(cssHelpers.sliderCircleSize,'px;\n          background-color: var(--sliderColor);\n          cursor: pointer;\n          border: 1px solid var(--sliderBorderColor);\n          border-radius: 100%;\n        } \n          \n        .min-max-slider > input::-webkit-slider-runnable-track,  \n        .min-max-slider > input::-moz-range-track {\n          cursor: pointer;\n        }\n          \n        .min-max-slider > input:focus::-webkit-slider-thumb {\n          /* Accessible border on focus */\n          border: 2px solid var(--sliderFocusBorderColor);\n        }\n\n        .min-max-slider > input:focus::-moz-range-thumb {\n            /* Accessible border on focus */\n            border: 2px solid var(--sliderFocusBorderColor);\n        }\n          \n        span.value {\n          height: 1.7em;\n          font-weight: bold;\n          display: inline-block;\n        }\n      \n        span.value.upper::before {\n          content: "- ";\n          white-space: pre;\n          display: inline-block;\n          margin-left: 0.4em;\n        }     \n      </style>\n      \n      <div id="').concat(constants.SLIDER_ID,'" class="min-max-slider">\n        <label id="').concat(constants.MIN_LABEL_ID,'" for="').concat(constants.MIN,'">Minimum</label> \n        <input id="').concat(constants.MIN,'" name="').concat(constants.MIN,'" type="range" step="1" />\n        <label id="').concat(constants.MAX_LABEL_ID,'" for="').concat(constants.MAX,'">Maximum</label>\n        <input id="').concat(constants.MAX,'" name="').concat(constants.MAX,'" type="range" step="1" />\n      </div>\n  ');var SimpleRange=function(){_inherits(n,_wrapNativeSuper(HTMLElement));var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).emitRangeSelection=function(){return t.emitRange()},t.onRangeInput=function(e){return t.update(e.target)},t.attachShadow({mode:"open"}),t.shadowRoot.appendChild(template.content.cloneNode(!0)),t}return _createClass(n,[{key:"sliderId",get:function(){return this.getAttribute("id")}},{key:"minRange",get:function(){return parseInt(this.getAttribute("min-range"))||parseInt(this.getAttribute("min"))||1},set:function(e){this.setAttribute("min-range",e),this.setAttribute("min",e)}},{key:"maxRange",get:function(){return parseInt(this.getAttribute("max-range"))||parseInt(this.getAttribute("max"))||0},set:function(e){this.setAttribute("max-range",e),this.setAttribute("max",e)}},{key:"numberOfLegendItemsToShow",get:function(){var e=parseInt(this.getAttribute("number-of-legend-items-to-show"));return e&&1<e?e:2}},{key:"hideLegend",get:function(){return this.hasAttribute("hide-legend")}},{key:"hideLabel",get:function(){return this.hasAttribute("hide-label")}},{key:"sliderColor",get:function(){return this.getAttribute("slider-color")}},{key:"circleColor",get:function(){return this.getAttribute("circle-color")}},{key:"circleBorderColor",get:function(){return this.getAttribute("circle-border-color")}},{key:"circleFocusBorderColor",get:function(){return this.getAttribute("circle-focus-border-color")}},{key:"eventNameToEmitOnChange",get:function(){return this.getAttribute("event-name-to-emit-on-change")||constants.CUSTOM_EVENT_TO_EMIT_NAME}},{key:"attributeChangedCallback",value:function(e,t,n){switch(e){case"min-label":if(!n)return;this.getEl(constants.MIN_LABEL_ID).innerText=n;break;case"max-label":if(!n)return;this.getEl(constants.MAX_LABEL_ID).innerText=n}}},{key:"connectedCallback",value:function(){this.init()}},{key:"disconnectedCallback",value:function(){var e=this.getEl(constants.SLIDER_ID),t=e.querySelector("#".concat(constants.MIN));this.removeEventListeners(t,constants.RANGE_STOPPED_EVENTS,this.emitRangeSelection,!1),this.removeEventListeners(t,["input"],this.onRangeInput,!1);e=e.querySelector("#".concat(constants.MAX));this.removeEventListeners(e,constants.RANGE_STOPPED_EVENTS,this.emitRangeSelection,!1),this.removeEventListeners(e,["input"],this.onRangeInput,!1)}},{key:"dispatchCustomEvent",value:function(e,t){(e||window).dispatchEvent(t)}},{key:"addMultipleEventListeners",value:function(t,e,n){e.forEach(function(e){return t.addEventListener(e,n)})}},{key:"removeEventListeners",value:function(t,e,n,r){e.forEach(function(e){t.removeEventListener(e,n,r)})}},{key:"getEl",value:function(e){return this.shadowRoot.getElementById(e)}},{key:"init",value:function(){this.setupColors();var e=this.getEl(constants.SLIDER_ID),t=e.querySelector("#".concat(constants.MIN)),n=e.querySelector("#".concat(constants.MAX));t.setAttribute("data-value",this.minRange),n.setAttribute("data-value",this.maxRange),e.setAttribute("data-range-width",e.offsetWidth),this.createLabels(e,t),this.createLegend(e);var r=(this.minRange+this.maxRange)/2;this.draw(e,r),t.addEventListener("input",this.onRangeInput),n.addEventListener("input",this.onRangeInput),this.addMultipleEventListeners(t,constants.RANGE_STOPPED_EVENTS,this.emitRangeSelection),this.addMultipleEventListeners(n,constants.RANGE_STOPPED_EVENTS,this.emitRangeSelection)}},{key:"emitRange",value:function(){var e=this.getEl(constants.SLIDER_ID),t=e.querySelector("#".concat(constants.MIN)),n=e.querySelector("#".concat(constants.MAX));this.dispatchCustomEvent(e,new CustomEvent(this.eventNameToEmitOnChange,{bubbles:!0,composed:!0,detail:{sliderId:this.sliderId,minRangeValue:Math.floor(t.value),maxRangeValue:Math.floor(n.value)}}))}},{key:"draw",value:function(e,t){var n=e.querySelector("#".concat(constants.MIN));n.setAttribute(constants.MIN,this.minRange),n.setAttribute(constants.MAX,t);var r=e.querySelector("#".concat(constants.MAX));r.setAttribute(constants.MIN,t),r.setAttribute(constants.MAX,this.maxRange);var o=parseInt(e.getAttribute("data-range-width")),i=cssHelpers.sliderCircleSize;n.style.width="".concat(parseInt(i+(t-this.minRange)/(this.maxRange-this.minRange)*(o-2*i)),"px"),r.style.width="".concat(parseInt(i+(this.maxRange-t)/(this.maxRange-this.minRange)*(o-2*i)),"px"),n.style.left="0px",r.style.left="".concat(parseInt(n.style.width),"px");t=e.querySelector(".lower"),o=n.offsetHeight;this.hideLabel||(n.style.top="".concat(t.offsetHeight,"px"),r.style.top="".concat(t.offsetHeight,"px"),o+=t.offsetHeight),this.hideLegend||((i=e.querySelector(".legend")).style.paddingTop="".concat(n.offsetHeight,"px"),o+=+i.offsetHeight),e.style.height="".concat(o,"px"),r.value>this.maxRange-1&&r.setAttribute("data-value",this.maxRange),r.value=r.getAttribute("data-value"),n.value=n.getAttribute("data-value"),this.hideLabel||(e=e.querySelector(".upper"),t.innerHTML=n.getAttribute("data-value"),e.innerHTML=r.getAttribute("data-value"))}},{key:"update",value:function(e){var t=e.parentElement,n=t.querySelector("#".concat(constants.MIN)),r=t.querySelector("#".concat(constants.MAX)),o=Math.floor(n.value),e=Math.floor(r.value);n.setAttribute("data-value",o),r.setAttribute("data-value",e),this.draw(t,(o+e)/2)}},{key:"setupColors",value:function(){var t=this;this.shadowRoot.querySelectorAll(".min-max-slider > input").forEach(function(e){t.sliderColor&&(e.style.backgroundImage="linear-gradient(to bottom, transparent 0%, transparent 30%, ".concat(t.sliderColor," 30%, ").concat(t.sliderColor," 60%, transparent 60%, transparent 100%)")),t.circleColor&&e.style.setProperty("--sliderColor",t.circleColor),t.circleBorderColor&&e.style.setProperty("--sliderBorderColor",t.circleBorderColor),t.circleFocusBorderColor&&e.style.setProperty("--sliderFocusBorderColor",t.circleFocusBorderColor)})}},{key:"createLegend",value:function(e){if(!this.hideLegend){var t=document.createElement("div");t.classList.add("legend");for(var n=[],r=0;r<this.numberOfLegendItemsToShow;r++){n[r]=document.createElement("div");var o=Math.round(this.minRange+r/(this.numberOfLegendItemsToShow-1)*(this.maxRange-this.minRange));n[r].appendChild(document.createTextNode(o)),t.appendChild(n[r])}e.appendChild(t)}}},{key:"createLabels",value:function(e,t){var n,r;this.hideLabel||(n=document.createElement("span"),r=document.createElement("span"),n.classList.add("lower","value"),r.classList.add("upper","value"),n.appendChild(document.createTextNode(this.minRange)),r.appendChild(document.createTextNode(this.maxRange)),e.insertBefore(n,t.previousElementSibling),e.insertBefore(r,t.previousElementSibling))}}],[{key:"observedAttributes",get:function(){return["min-label","max-label","min-range","max-range"]}}]),n}();window.customElements.define("range-selector",SimpleRange);